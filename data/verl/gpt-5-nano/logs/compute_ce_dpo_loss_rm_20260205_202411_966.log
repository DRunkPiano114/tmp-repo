================================================================================
测试时间: 2026-02-05 20:24:11
函数名: compute_ce_dpo_loss_rm
测试文件: test_code/test_ce_dpo_loss.py
测试框架: unittest
返回码: 1
================================================================================

【STDOUT】
--------------------------------------------------------------------------------
(无输出)

【STDERR】
--------------------------------------------------------------------------------
FFFFFFFFF
======================================================================
FAIL: test_batch_consistency (__main__.TestCEDPOLoss.test_batch_consistency)
Test batch processing consistency
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 196, in test_batch_consistency
    self.assertAlmostEqual(single_loss.item(), batch_loss.item(), places=30)
AssertionError: -0.0 != 1.0986121892929077 within 30 places (1.0986121892929077 difference)

======================================================================
FAIL: test_beta_scaling_input_output_samples (__main__.TestCEDPOLoss.test_beta_scaling_input_output_samples)
Test specific input-output examples for beta parameter scaling
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 287, in test_beta_scaling_input_output_samples
    self.assertAlmostEqual(result_small.item(), expected_loss_small.item(), places=30)
AssertionError: -0.0 != 0.557487964630127 within 30 places (0.557487964630127 difference)

======================================================================
FAIL: test_ce_dpo_loss_mathematical_properties (__main__.TestCEDPOLoss.test_ce_dpo_loss_mathematical_properties)
Test mathematical properties and computational correctness of CE DPO loss
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 84, in test_ce_dpo_loss_mathematical_properties
    torch.testing.assert_close(loss, expected_loss, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 0.04858734831213951 but got 0.0024756414350122213.
Absolute difference: 0.04611170687712729 (up to 1e-30 allowed)
Relative difference: 0.9490476117546492 (up to 1e-30 allowed)

======================================================================
FAIL: test_compute_ce_dpo_loss_rm_basic (__main__.TestCEDPOLoss.test_compute_ce_dpo_loss_rm_basic)
Test basic functionality of Cross-Entropy DPO loss calculation
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 62, in test_compute_ce_dpo_loss_rm_basic
    torch.testing.assert_close(loss, expected_loss, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 0.6844281554222107 but got 1.3650070428848267.
Absolute difference: 0.680578887462616 (up to 1e-30 allowed)
Relative difference: 0.994375935693031 (up to 1e-30 allowed)

======================================================================
FAIL: test_different_beta_values (__main__.TestCEDPOLoss.test_different_beta_values)
Test the impact of different beta parameter values
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 110, in test_different_beta_values
    torch.testing.assert_close(losses, expected_losses, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 0.7036470770835876 but got 0.7133471369743347.
Absolute difference: 0.00970005989074707 (up to 1e-30 allowed)
Relative difference: 0.013785404937587457 (up to 1e-30 allowed)

The failure occurred for item [0]

======================================================================
FAIL: test_edge_cases (__main__.TestCEDPOLoss.test_edge_cases)
Test edge cases
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 163, in test_edge_cases
    torch.testing.assert_close(loss, expected_loss, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 4.6788117949230976e-14 but got -0.0.
Absolute difference: 4.6788117949230976e-14 (up to 1e-30 allowed)
Relative difference: 1.0 (up to 1e-30 allowed)

======================================================================
FAIL: test_input_output_samples (__main__.TestCEDPOLoss.test_input_output_samples)
Test specific input-output examples
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 214, in test_input_output_samples
    self.assertAlmostEqual(result.item(), expected_loss.item(), places=30)
AssertionError: -0.0 != 0.0024756414350122213 within 30 places (0.0024756414350122213 difference)

======================================================================
FAIL: test_perfect_prediction_cases (__main__.TestCEDPOLoss.test_perfect_prediction_cases)
Test input-output examples for perfect prediction cases
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 320, in test_perfect_prediction_cases
    torch.testing.assert_close(result, expected_result, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 0.2014133185148239 but got -0.0.
Absolute difference: 0.2014133185148239 (up to 1e-30 allowed)
Relative difference: 1.0 (up to 1e-30 allowed)

======================================================================
FAIL: test_response_mask_effect (__main__.TestCEDPOLoss.test_response_mask_effect)
Test the effect of response_mask on loss calculation
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 135, in test_response_mask_effect
    torch.testing.assert_close(loss_full, expected_loss_full, atol=1e-30, rtol=1e-30)
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/venv_verl/lib/python3.11/site-packages/torch/testing/_comparison.py", line 1600, in assert_close
    raise error_metas[0].to_error(msg)
AssertionError: Scalars are not close!

Expected 0.7130152583122253 but got 0.6931471824645996.
Absolute difference: 0.019868075847625732 (up to 1e-30 allowed)
Relative difference: 0.027864867709360596 (up to 1e-30 allowed)

----------------------------------------------------------------------
Ran 9 tests in 0.007s

FAILED (failures=9)

================================================================================
日志结束
