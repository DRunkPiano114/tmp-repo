================================================================================
测试时间: 2026-02-05 18:09:42
函数名: compute_ce_dpo_loss_rm
测试文件: test_code/test_ce_dpo_loss.py
测试框架: unittest
返回码: 1
================================================================================

【STDOUT】
--------------------------------------------------------------------------------
(无输出)

【STDERR】
--------------------------------------------------------------------------------
EEEEEEEEE
======================================================================
ERROR: test_batch_consistency (__main__.TestCEDPOLoss.test_batch_consistency)
Test batch processing consistency
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 186, in test_batch_consistency
    single_loss = compute_ce_dpo_loss_rm(single_scores, single_acc, single_mask, beta)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_beta_scaling_input_output_samples (__main__.TestCEDPOLoss.test_beta_scaling_input_output_samples)
Test specific input-output examples for beta parameter scaling
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 282, in test_beta_scaling_input_output_samples
    result_small = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta_small)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_ce_dpo_loss_mathematical_properties (__main__.TestCEDPOLoss.test_ce_dpo_loss_mathematical_properties)
Test mathematical properties and computational correctness of CE DPO loss
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 73, in test_ce_dpo_loss_mathematical_properties
    loss = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_compute_ce_dpo_loss_rm_basic (__main__.TestCEDPOLoss.test_compute_ce_dpo_loss_rm_basic)
Test basic functionality of Cross-Entropy DPO loss calculation
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 53, in test_compute_ce_dpo_loss_rm_basic
    loss = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_different_beta_values (__main__.TestCEDPOLoss.test_different_beta_values)
Test the impact of different beta parameter values
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 100, in test_different_beta_values
    loss = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_edge_cases (__main__.TestCEDPOLoss.test_edge_cases)
Test edge cases
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 155, in test_edge_cases
    loss = compute_ce_dpo_loss_rm(extreme_scores, acc, response_mask, beta)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_input_output_samples (__main__.TestCEDPOLoss.test_input_output_samples)
Test specific input-output examples
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 206, in test_input_output_samples
    result = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_perfect_prediction_cases (__main__.TestCEDPOLoss.test_perfect_prediction_cases)
Test input-output examples for perfect prediction cases
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 311, in test_perfect_prediction_cases
    result = compute_ce_dpo_loss_rm(token_level_scores, acc, response_mask, beta)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

======================================================================
ERROR: test_response_mask_effect (__main__.TestCEDPOLoss.test_response_mask_effect)
Test the effect of response_mask on loss calculation
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/test_ce_dpo_loss.py", line 123, in test_response_mask_effect
    loss_full = compute_ce_dpo_loss_rm(token_level_scores, acc, full_mask, beta)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/paulwu/Desktop/KOCO-bench/KOCO-bench-en/domain_code_generation/verl/test_examples/prime/code/test_code/../recipe/prime/prime_core_algos.py", line 105, in compute_ce_dpo_loss_rm
    raise ValueError("token_level_scores must have shape (B, C, L)")
ValueError: token_level_scores must have shape (B, C, L)

----------------------------------------------------------------------
Ran 9 tests in 0.010s

FAILED (errors=9)

================================================================================
日志结束
